---
title: 백준-15662-시뮬레이션-톱니바퀴
date: 2020-02-27 15:25:00
category: Algorithm
draft: false
---

[문제](https://www.acmicpc.net/problem/15662)

```cpp{3}
#include <stdio.h>
#include <vector>
#define max 9
using namespace std;
// N극은 0, S극은 1
int T, K, target, direction;
int ans = 0;
vector<vector<int>> v;

void left(int target) {
	int first = v[target][1];
	for (int i = 2; i < max; i++) {
		v[target][i - 1] = v[target][i];
	}
	v[target][max - 1] = first;
	return;
}

void right(int target) {
	int last = v[target][max - 1];
	for (int i = max - 1; i > 1; i--) {
		v[target][i] = v[target][i - 1];
	}
	v[target][1] = last;
	return;
}

void rotate(int target, int direction) {
	// 3이랑 7이랑
	int temp_direction = direction;
	bool pos = true;
	vector<int> rot(T+1, 0);
	rot[target] = direction;
	for (int i = target; i <= T - 1; i++) {
		if (v[i][3] != v[i + 1][7]) {
			if (rot[i] == 1) {
				rot[i + 1] = -1;
			}
			else if (rot[i] == -1) {
				rot[i + 1] = 1;
			}
		}
	}
	temp_direction = direction;
	pos = true;
	for (int i = target; i > 1; i--) {
		if (v[i - 1][3] != v[i][7]) {
			if (rot[i] == 1) {
				rot[i - 1] = -1;
			}
			else if (rot[i] == -1) {
				rot[i - 1] = 1;
			}
		}
	}
	for (int i = 1; i <= T; i++) {
		if (rot[i] == 1)
			right(i);
		else if (rot[i] == -1)
			left(i);
	}
}

int main() {
	scanf("%d", &T);
	v.push_back({});
	for (int i = 1; i <= T; i++) {
		v.push_back({0,0,0,0,0,0,0,0,0});
		for (int j = 1; j < max; j++) {
			scanf("%1d", &v[i][j]);
		}
	}
	scanf("%d", &K);
	for (int i = 0; i < K; i++) {
		scanf("%d %d", &target, &direction);
		rotate(target, direction);
	}

	for (int i = 1; i <= T; i++) {
		if (v[i][1] == 1) {
			ans += 1;
		}

	}
	printf("%d", ans);
}
```

- 톱니바퀴 개수가 바뀔 수 있어서 동적할당을 해야했다.
